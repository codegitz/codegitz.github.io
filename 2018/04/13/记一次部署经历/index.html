<!DOCTYPE html>
<html class="full-height">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="//cdn.bootcss.com/bulma/0.4.1/css/bulma.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  
  <title>记一次部署经历 | Codegitz&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言之前本人照葫芦画瓢做了个大概的云笔记，后来巧合之下租了个阿里云的服务器，于是就开始了部署项目的折腾之路 服务器环境准备cloud_note是一个基于javaweb的项目，所以需要配置java环境，还有需要Tomcat启动服务，jdk我选择的是1.7.79，Tomcat7.0.23，然后就是安装，配置路径，这里就不多说了。 项目导出与部署我使用的是eclipse，右击项目，export，导出w">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="记一次部署经历">
<meta property="og:url" content="http://yoursite.com/2018/04/13/记一次部署经历/index.html">
<meta property="og:site_name" content="Codegitz&#39;s Blog">
<meta property="og:description" content="前言之前本人照葫芦画瓢做了个大概的云笔记，后来巧合之下租了个阿里云的服务器，于是就开始了部署项目的折腾之路 服务器环境准备cloud_note是一个基于javaweb的项目，所以需要配置java环境，还有需要Tomcat启动服务，jdk我选择的是1.7.79，Tomcat7.0.23，然后就是安装，配置路径，这里就不多说了。 项目导出与部署我使用的是eclipse，右击项目，export，导出w">
<meta property="og:image" content="https://i.imgur.com/jukkZsN.png">
<meta property="og:image" content="https://i.imgur.com/ayBnrat.png">
<meta property="og:image" content="https://i.imgur.com/mf0OXOA.png">
<meta property="og:image" content="https://i.imgur.com/IKTF8jb.png">
<meta property="og:image" content="https://i.imgur.com/fhWTkym.png">
<meta property="og:updated_time" content="2018-04-13T12:03:44.285Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记一次部署经历">
<meta name="twitter:description" content="前言之前本人照葫芦画瓢做了个大概的云笔记，后来巧合之下租了个阿里云的服务器，于是就开始了部署项目的折腾之路 服务器环境准备cloud_note是一个基于javaweb的项目，所以需要配置java环境，还有需要Tomcat启动服务，jdk我选择的是1.7.79，Tomcat7.0.23，然后就是安装，配置路径，这里就不多说了。 项目导出与部署我使用的是eclipse，右击项目，export，导出w">
<meta name="twitter:image" content="https://i.imgur.com/jukkZsN.png">
  
    <link rel="alternate" href="/atom.xml" title="Codegitz&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="https://raw.githubusercontent.com/codegitz/TestCapacity/7acf45f27b3185ef97e94f69889d4c0253b12723/a5ea21%5B1%5D.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/css/nav.css">
<link rel="stylesheet" href="/css/layout.css">
  

</head>

<body>
  <header id="navbar" class="overflow-hidden">
  <div class="container">
    <nav class="nav">
         <div class="nav-left">
            <a href="/" class="nav-item" style="font-size: 20px;">
              <span class="logo">Codegitz</span>'s Blog
            </a>
         </div>
        <div class="nav-center is-hidden position-relative" id="search_container">
            <div class="nav-item full-width full-height">
                <i class="fa fa-search has-padding" aria-hidden="true"></i>
                <input type="text" id="search_input" class="search-input full-height full-width" placeholder="Search post" autofocus>
                <i id="close_search" class="fa fa-times" aria-hidden="true"></i>
            </div>
            <div id="search_result"></div>
        </div>
        <div class="nav-right nav-menu">
            <a class="nav-item" id="search">
                <i class="fa fa-search" aria-hidden="true"></i>
            </a>
            
            <a class="nav-item" href="/home">
                Home
            </a>
            
            <a class="nav-item" href="/works">
                My Works
            </a>
            
            <a class="nav-item" href="/about">
                About
            </a>
            
        </div>
        <span class="nav-toggle" id="navMenuDropdown">
            <span></span>
            <span></span>
            <span></span>
        </span>
        <div class="navbar-menu position-absolute full-width content-box is-hidden-desktop is-flex flex-column center" style="top: 100%;">
            
            <a class="nav-item flex-1" href="/home">
                Home
            </a>
            
            <a class="nav-item flex-1" href="/works">
                My Works
            </a>
            
            <a class="nav-item flex-1" href="/about">
                About
            </a>
            
        </div>
    </nav>
  </div>
</header>

  <div id="main-wrap" class="position-relative" style="margin-top: 55px;">
      <div class="main-inner-content">
          <!--博文页面-->

<style>
    .header-box {
        height: 370px;
        filter: blur(10px);
        background-size: cover;
        background-color: lightsteelblue;
    }

    .post-box {
        padding: 15px;
        padding-top: 60px;
        min-height: 80vh;
        margin-top: -200px;
        border-radius: 4px;
        background-color: rgba(255,255,255,.8);
    }

    .post-avatar {
        height: 30px;
        width: 30px;
        border-radius: 50%;
    }

    .flow-chart {
        text-align: center;
    }

    img[alt="post-cover"] {
        display: none;
    }
</style>
<header>
    <div id="header_box" class="header-box"></div>
</header>
<section>
    <div class="container post-box">
        <div class="content post-title is-flex center flex-column" style="margin-bottom: 70px; overflow: auto;">
            <h1 class="has-text-centered" style="padding-bottom: 10px; border-bottom: 3px solid #fff">
                <strong>记一次部署经历</strong>
            </h1>
            
            <div class="is-flex align-center">
                <img class="post-avatar" src="https://raw.githubusercontent.com/codegitz/MarkdownPhotos/master/Img8049893_f.jpg">
                <span style="padding:0 10px;"> <span class="sub-title">By</span> Codegitz</span>
                <span class="post-date sub-title">at: 2018-04-13</span>
            </div>
            
                <div>
                    
                         <a class="tag is-post-tag" href="/tags/java/">java</a>
                    
                </div>
            
        </div>
        <div class="content" style="overflow: auto">
            <script src="/assets/js/APlayer.min.js"> </script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前本人照葫芦画瓢做了个大概的云笔记，后来巧合之下租了个阿里云的服务器，于是就开始了部署项目的折腾之路</p>
<h2 id="服务器环境准备"><a href="#服务器环境准备" class="headerlink" title="服务器环境准备"></a>服务器环境准备</h2><p>cloud_note是一个基于javaweb的项目，所以需要配置java环境，还有需要Tomcat启动服务，jdk我选择的是1.7.79，Tomcat7.0.23，然后就是安装，配置路径，这里就不多说了。</p>
<h2 id="项目导出与部署"><a href="#项目导出与部署" class="headerlink" title="项目导出与部署"></a>项目导出与部署</h2><p>我使用的是eclipse，右击项目，export，导出war file<br><img src="https://i.imgur.com/jukkZsN.png" alt=""><br>destination 选择你要导出的路径<br><img src="https://i.imgur.com/ayBnrat.png" alt=""><br>然后将war文件上传到服务器上，放到webapps目录下，Tomcat启动运行之后会自动生成一个与你war文件名对应的文件夹，里面就包含了你项目的所有东西，如图<br><img src="https://i.imgur.com/mf0OXOA.png" alt=""><br>然后通过bin目录下的startup.bat启动Tomcat，可以在本地访问项目了。<br>值得一提的是，阿里云服务器需要在安全组开放对应的端口才可以访问，不然是无法访问的，例如启动Tomcat需要开放8080端口，还有数据库的3306端口也要开放<br>安全组–&gt;配置规则–&gt;添加安全组规则<br><img src="https://i.imgur.com/IKTF8jb.png" alt=""><br>至此项目服务器部署已经完毕</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>部署完毕后我发现用服务器的公网ip加项目名无法访问项目，而且控制台也没有报错，后来在浏览器发现是无法加载资源，经老三提醒后发现是js跨域的问题，找到了方向之后成功解决了这个问题。第一次部署，没有留意到跨域的问题，莫名了很久，终于解决了。</p>
<h2 id="js跨域"><a href="#js跨域" class="headerlink" title="js跨域"></a>js跨域</h2><p>跨域访问，或者说 JavaScript 的跨域访问问题，是浏览器出于安全考虑而设置的一个限制，即同源策略。举例说明，当 A，B 两个网站属于不同的域时，如果来自于 A 网站的页面中的 JavaScript 代码希望访问 B 网站的时候，浏览器会拒绝该访问。</p>
<p>解决跨域方式有很多种，其中有jsonp,但是只能处理get请求。<br>所以我采用了CORS。</p>
<h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。</p>
<p>它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。</p>
<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。</p>
<p>整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。</p>
<p>因此，实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨源通信。</p>
<h3 id="两种请求方式"><a href="#两种请求方式" class="headerlink" title="两种请求方式"></a>两种请求方式</h3><p>浏览器将CORS请求分成两类：简单请求（simple request）和非简单请求（not-so-simple request），浏览器对于两种请求的处理方式不一样。<br>满足以下两大条件就是简单请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(1) 请求方法是以下三种方法之一：</div><div class="line">HEAD</div><div class="line">GET</div><div class="line">POST</div><div class="line">2）HTTP的头信息不超出以下几种字段：</div><div class="line">Accept</div><div class="line">Accept-Language</div><div class="line">Content-Language</div><div class="line">Last-Event-ID</div><div class="line">Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain</div></pre></td></tr></table></figure></p>
<p>java后台解决方法有两个：</p>
<h4 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h4><p>1.自己建一个corsfilter类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">package io.codegitz.cloud_note.filter;</div><div class="line"></div><div class="line">import java.io.IOException;</div><div class="line"></div><div class="line">import javax.servlet.Filter;</div><div class="line">import javax.servlet.FilterChain;</div><div class="line">import javax.servlet.FilterConfig;</div><div class="line">import javax.servlet.ServletException;</div><div class="line">import javax.servlet.ServletRequest;</div><div class="line">import javax.servlet.ServletResponse;</div><div class="line">import javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line">import org.springframework.stereotype.Component;</div><div class="line"></div><div class="line">@Component</div><div class="line">public class CorsFilter implements Filter&#123;</div><div class="line"></div><div class="line">	//@Override</div><div class="line">	public void init(FilterConfig filterConfig) throws ServletException &#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//@Override</div><div class="line">	public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</div><div class="line">			throws IOException, ServletException &#123;</div><div class="line">		HttpServletResponse response = (HttpServletResponse)servletResponse;  </div><div class="line">        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);  </div><div class="line">        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS, DELETE&quot;);  </div><div class="line">        response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);  </div><div class="line">        response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;x-requested-with,Authorization&quot;);  </div><div class="line">        response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);  </div><div class="line">        filterChain.doFilter(servletRequest, servletResponse); </div><div class="line">		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//@Override</div><div class="line">	public void destroy() &#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>预检请求会附带一些关于接下来的请求的信息给服务器，主要有以下几种：</p>
<p>Origin：请求的源域信息<br>Access-Control-Request-Method：接下来的请求类型，如POST、GET等<br>Access-Control-Request-Headers：接下来的请求中包含的用户显式设置的Header列表<br>服务器端收到请求之后，会根据附带的信息来判断是否允许该跨域请求，信息返回同样是通过Header完成的：</p>
<p>Access-Control-Allow-Origin：允许跨域的Origin列表<br>Access-Control-Allow-Methods：允许跨域的方法列表<br>Access-Control-Allow-Headers：允许跨域的Header列表<br>Access-Control-Expose-Headers：允许暴露给JavaScript代码的Header列表<br>Access-Control-Max-Age：最大的浏览器缓存时间，单位s<br>以上行为都是浏览器自动完成的，用户无需关注这些细节。如果服务器配置正确，那么和正常非跨域请求是一样的。</p>
<p>2.在web.xml文件中配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;filter&gt;  </div><div class="line">    &lt;filter-name&gt;cors&lt;/filter-name&gt;  </div><div class="line">    &lt;filter-class&gt;io.codegitz.cloud_note.filter.CorsFilter&lt;/filter-class&gt;  </div><div class="line">&lt;/filter&gt;  </div><div class="line">&lt;filter-mapping&gt;  </div><div class="line">    &lt;filter-name&gt;cors&lt;/filter-name&gt;  </div><div class="line">    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;  </div><div class="line">&lt;/filter-mapping&gt;</div></pre></td></tr></table></figure></p>
<h4 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h4><p>这种方式似乎要spring4.2以上才支持，利用提供的jar包，下载 cors-filter-1.7.jar, java-property-utils-1.9.jar 这两个库文件放到lib目录下。(放到对应项目的webcontent/WEB-INF/lib/下)，如果是maven项目，可以简单添加如下依赖到pom.xml中即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.thetransactioncompany&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;cors-filter&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;[ version ]&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>
<p>接着添加CORS配置到web.xml文件中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 跨域配置，此filter应该放在所有filter之前--&gt;    </div><div class="line">&lt;filter&gt;</div><div class="line">        &lt;!-- The CORS filter with parameters --&gt;</div><div class="line">        &lt;filter-name&gt;CORS&lt;/filter-name&gt;</div><div class="line">        &lt;filter-class&gt;com.thetransactioncompany.cors.CORSFilter&lt;/filter-class&gt;</div><div class="line">        </div><div class="line">        &lt;!-- Note: All parameters are options, if omitted the CORS </div><div class="line">             Filter will fall back to the respective default values.</div><div class="line">          --&gt;</div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.allowGenericHttpRequests&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;true&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        </div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.allowOrigin&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;*&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        </div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.allowSubdomains&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;false&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        </div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.supportedMethods&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;GET, HEAD, POST, OPTIONS&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        </div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.supportedHeaders&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;Accept, Origin, X-Requested-With, Content-Type, Last-Modified&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        </div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.exposedHeaders&lt;/param-name&gt;</div><div class="line">            &lt;!--这里可以添加一些自己的暴露Headers   --&gt;</div><div class="line">            &lt;param-value&gt;X-Test-1, X-Test-2&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        </div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.supportsCredentials&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;true&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        </div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;param-name&gt;cors.maxAge&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;3600&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line"></div><div class="line">    &lt;/filter&gt;</div><div class="line"></div><div class="line">    &lt;filter-mapping&gt;</div><div class="line">        &lt;!-- CORS Filter mapping --&gt;</div><div class="line">        &lt;filter-name&gt;CORS&lt;/filter-name&gt;</div><div class="line">        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</div><div class="line">    &lt;/filter-mapping&gt;</div></pre></td></tr></table></figure></p>
<p>配置完成之后可以发送另起一个项目或者页面来测试配置是否成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;  </div><div class="line">&lt;html&gt;  </div><div class="line">&lt;head&gt;  </div><div class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;scripts/jquery.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;scripts/basevalue.js&quot;&gt;&lt;/script&gt;  </div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;  </div><div class="line">    $(function()&#123;  </div><div class="line">        //按钮单击时执行  </div><div class="line">        $(&quot;#testAjax&quot;).click(function()&#123;  </div><div class="line">              //取Ajax返回结果  </div><div class="line">              $.ajax(&#123;</div><div class="line">            	  url:path+&quot;/test/ajax.do&quot;,</div><div class="line">            	  data:&#123;&#125;,</div><div class="line">            	  dataType:&quot;json&quot;,</div><div class="line">            	  type:&quot;post&quot;,</div><div class="line">            	  success:function(result)&#123; </div><div class="line">            		  $(&quot;#myDiv&quot;).empty; </div><div class="line">            	 $(&quot;#myDiv&quot;).html(result.msg);</div><div class="line">                  //显示Ajax返回结果  </div><div class="line">            	  alert(result.msg);</div><div class="line">            	  &#125;,</div><div class="line">            	  error:function()&#123;</div><div class="line">            		  alert(&quot;错误&quot;);</div><div class="line">            	  &#125;&#125;);  </div><div class="line">         &#125;);  </div><div class="line">    &#125;);  </div><div class="line">&lt;/script&gt;      </div><div class="line">&lt;/head&gt;  </div><div class="line">    &lt;body&gt;  </div><div class="line">        &lt;div id=&quot;myDiv&quot;&gt;&lt;h2&gt;返回跨域的文本&lt;/h2&gt;&lt;/div&gt;  </div><div class="line">        &lt;button id=&quot;testAjax&quot; type=&quot;button&quot;&gt;点击获取Ajax跨域返回内容&lt;/button&gt;  </div><div class="line">    &lt;/body&gt;  </div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>浏览器输入<a href="http://47.106.120.224/cloud_note/Filter.html" target="_blank" rel="external">http://47.106.120.224/cloud_note/Filter.html</a><br>成功返回文本跨域请求成功<br><img src="https://i.imgur.com/fhWTkym.png" alt=""></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本次遇到的问题不大，都是没留意的小问题，倒是项目本身还有许多不完整的地方，bug多多，有时间再修改，源码稍后传到GitHub上，欢迎<a href="https://github.com/codegitz/cloud_note" target="_blank" rel="external">star</a>。</p>

        </div>
        <div class="post-reply">
            
            
        </div>
    </div>
</section>
<script>
    // 获取第一张图, 用以当封面背景图
    var img = document.querySelectorAll('img')[1]

    if (img) {
        var header_box = document.querySelector('#header_box')
        header_box.style.backgroundImage = 'url('+ img.src +')'
    }
</script>
      </div>
  </div>
  <style>
  #footer {
    min-height: 10vh;
    background: black;
    color: #fff;
  }

  #footer a {
    color: #e1e1e1;
  }
</style>
<footer id="footer" class="has-text-centered is-flex center">
  <div class="container has-padding">
    <div>
      <div>
        <!--请您保留作者署名, 主题制作来之不易-->
        Theme by <a href="http://haojen.github.io/">Haojen Ma</a>
        <br>
        Copyright © Codegitz 2018
        <br>
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      </div>
    </div>
  </div>
</footer>

<script src="/js/search_core.js"></script>
<script src="/js/script.js"></script>

</body>
</html>